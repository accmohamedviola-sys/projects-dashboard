<!DOCTYPE html>
<html lang="ar" dir="rtl" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة متابعة المشاريع - النسخة النهائية</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        tajawal: ['Tajawal', 'sans-serif'],
                    },
                },
            },
        }
    </script>
    <style>
        body { font-family: 'Tajawal', sans-serif; }
        .dark body { background-color: #0f172a; color: #f8fafc; }
        .dark .card { background-color: #1e293b; border-color: #334155; }
        .card { background: white; border-radius: 1rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border: 1px solid #e2e8f0; }
        .status-highlight { background-color: #10b981; color: white; padding: 2px 10px; border-radius: 9999px; font-weight: bold; box-shadow: 0 2px 4px rgba(16, 185, 129, 0.3); }
    </style>
</head>
<body class="p-4 md:p-8 transition-colors duration-200">
    <div id="app" class="max-w-6xl mx-auto">
        <header class="mb-10 text-center">
            <div class="flex justify-between items-center mb-6">
                <button onclick="document.documentElement.classList.toggle('dark')" class="px-4 py-2 rounded-lg bg-slate-200 dark:bg-slate-700 text-slate-800 dark:text-slate-200 font-bold transition-all hover:scale-105">
                    تبديل الوضع (Dark/Light)
                </button>
            </div>
            <h1 class="text-4xl font-bold text-slate-800 dark:text-white mb-4">لوحة متابعة المشاريع</h1>
            <div class="bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 p-4 inline-block rounded-r-lg">
                <p class="text-amber-800 dark:text-amber-200 text-xl font-bold">
                    توضيح المدة الزمنية المذكورة أدناه ( دقائق : ثواني)
                </p>
            </div>
        </header>

        <div id="projects-container" class="space-y-12">
            <!-- Projects will be injected here -->
        </div>
    </div>

    <script>
        const data = [
  {
    "name": "DORO PROJECT",
    "tasks": [
      {
        "duration": "113:56",
        "scripts": 27,
        "status": "خالص"
      },
      {
        "duration": "56:05",
        "scripts": 4,
        "status": "خلص التعديلات"
      },
      {
        "duration": "78:33",
        "scripts": 8,
        "status": "شغال"
      },
      {
        "duration": "31:00",
        "scripts": 3,
        "status": "جاري التعديل"
      },
      {
        "duration": "383:48",
        "scripts": 49,
        "status": "في انتظار التعديلات"
      },
      {
        "duration": "0:00",
        "scripts": 0,
        "status": "متاح للتسليم"
      }
    ]
  },
  {
    "name": "MSA PROJECT",
    "tasks": [
      {
        "duration": "54:36",
        "scripts": 10,
        "status": "خالص"
      },
      {
        "duration": "39:53",
        "scripts": 7,
        "status": "شغال"
      },
      {
        "duration": "181:59",
        "scripts": 34,
        "status": "في انتظار التعديل"
      },
      {
        "duration": "360:39",
        "scripts": 69,
        "status": "في انتظار الموافقة علي الشخصيات"
      },
      {
        "duration": "4:38",
        "scripts": 1,
        "status": "مطلوب تغيير الشخصيات"
      },
      {
        "duration": "41:20",
        "scripts": 4,
        "status": "متاح للتسليم"
      }
    ]
  },
  {
    "name": "مشروع قيم و عبر",
    "tasks": [
      {
        "duration": "34:58",
        "scripts": 5,
        "status": "جاري التعديل"
      },
      {
        "duration": "38:22",
        "scripts": 9,
        "status": "جاهز للريندر"
      },
      {
        "duration": "45:05",
        "scripts": 8,
        "status": "شغال"
      },
      {
        "duration": "705:39",
        "scripts": 17,
        "status": "في انتظار التعديلات"
      },
      {
        "duration": "51:29",
        "scripts": 9,
        "status": "متاح للتسليم"
      },
      {
        "duration": "83:31",
        "scripts": 14,
        "status": "ناقص شخصيات"
      },
      {
        "duration": "0:00",
        "scripts": 1,
        "status": "ناقص صوت"
      }
    ]
  },
  {
    "name": "NURSERY PROJECT",
    "tasks": [
      {
        "duration": "0:00",
        "scripts": 0,
        "status": "خالص"
      },
      {
        "duration": "15:20",
        "scripts": 12,
        "status": "في انتظار التعديلات"
      },
      {
        "duration": "8:14",
        "scripts": 4,
        "status": "شغال"
      },
      {
        "duration": "2:46",
        "scripts": 2,
        "status": "متاح للتسليم"
      }
    ]
  }
];

        function createProjectSection(project, index) {
            const section = document.createElement('div');
            section.className = 'card p-6 md:p-8 mb-8';
            
            const title = document.createElement('h2');
            title.className = 'text-3xl font-bold text-slate-700 dark:text-slate-200 mb-6 border-b-2 border-emerald-500 pb-2 inline-block';
            title.textContent = project.name;
            section.appendChild(title);

            const grid = document.createElement('div');
            grid.className = 'grid grid-cols-1 lg:grid-cols-2 gap-10';
            
            // Chart Container
            const chartDiv = document.createElement('div');
            chartDiv.className = 'bg-white dark:bg-slate-800 p-4 rounded-xl border border-slate-100 dark:border-slate-700';
            chartDiv.innerHTML = `<canvas id="chart-${index}"></canvas>`;
            grid.appendChild(chartDiv);

            // Table Container
            const tableDiv = document.createElement('div');
            tableDiv.className = 'overflow-x-auto';
            tableDiv.innerHTML = `
                <table class="min-w-full divide-y divide-slate-200 dark:divide-slate-700">
                    <thead>
                        <tr class="bg-slate-50 dark:bg-slate-800/50">
                            <th class="px-4 py-4 text-right text-sm font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wider">الحالة</th>
                            <th class="px-4 py-4 text-right text-sm font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wider">المدة (دقائق:ثواني)</th>
                            <th class="px-4 py-4 text-right text-sm font-bold text-slate-600 dark:text-slate-300 uppercase tracking-wider">السكربتات</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-200 dark:divide-slate-700">
                        ${project.tasks.map(task => {
                            const isAvailable = task.status.includes('متاح للتسليم');
                            return `
                            <tr class="${isAvailable ? 'bg-emerald-50/50 dark:bg-emerald-900/10' : 'hover:bg-slate-50 dark:hover:bg-slate-800/30'} transition-colors">
                                <td class="px-4 py-4 whitespace-nowrap text-sm font-medium">
                                    <span class="${isAvailable ? 'status-highlight' : 'text-slate-900 dark:text-slate-100'}">${task.status}</span>
                                </td>
                                <td class="px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400 font-mono">
                                    ${task.duration}
                                </td>
                                <td class="px-4 py-4 whitespace-nowrap text-sm text-slate-500 dark:text-slate-400 font-bold">${task.scripts}</td>
                            </tr>
                        `}).join('')}
                    </tbody>
                </table>
            `;
            grid.appendChild(tableDiv);
            
            section.appendChild(grid);
            return section;
        }

        const container = document.getElementById('projects-container');
        data.forEach((project, index) => {
            container.appendChild(createProjectSection(project, index));
            
            // Initialize Chart
            const ctx = document.getElementById(`chart-${index}`).getContext('2d');
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: project.tasks.map(t => t.status),
                    datasets: [{
                        label: 'عدد السكربتات',
                        data: project.tasks.map(t => t.scripts),
                        backgroundColor: project.tasks.map(t => t.status.includes('متاح للتسليم') ? 'rgba(16, 185, 129, 0.7)' : 'rgba(59, 130, 246, 0.5)'),
                        borderColor: project.tasks.map(t => t.status.includes('متاح للتسليم') ? 'rgb(16, 185, 129)' : 'rgb(59, 130, 246)'),
                        borderWidth: 2,
                        borderRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: { 
                            beginAtZero: true,
                            grid: { color: 'rgba(200, 200, 200, 0.05)' },
                            ticks: { color: '#94a3b8', font: { weight: 'bold' } }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { color: '#94a3b8', font: { weight: 'bold' } }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
